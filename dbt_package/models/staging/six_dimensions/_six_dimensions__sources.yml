version: 2

sources:
  - name: raw_six_dimensions
    description: Six Dimensions benchmarking data parsed from PDF reports
    database: "{{ env_var('DBT_BIGQUERY_PROJECT') }}"
    schema: raw_six_dimensions
    loader: document_ai

    tables:
      - name: jedi_report
        description: JEDI equity analysis reports (7 PDFs)
        identifier: jedi_report
        columns:
          - name: report_year
            description: Academic year
            tests:
              - not_null
          - name: demographic_category
            description: Category (Gender, Disadvantage, Ethnicity, SEND)
            tests:
              - not_null
          - name: demographic_value
            description: Specific value within category
            tests:
              - not_null

      - name: va_report
        description: Value-Added analysis reports (9 PDFs)
        identifier: va_report
        columns:
          - name: report_year
            tests:
              - not_null
          - name: level
            description: College or Subject level
            tests:
              - not_null

      - name: sixth_sense_report
        description: Sixth Sense performance reports (16 PDFs)
        identifier: sixth_sense_report
        columns:
          - name: report_year
            tests:
              - not_null
          - name: level
            tests:
              - not_null

      - name: vocational_report
        description: Vocational qualification reports (12 PDFs with 5 datasets each)
        identifier: vocational_report
        columns:
          - name: report_year
            tests:
              - not_null
          - name: dataset_name
            description: Dataset identifier within report
            tests:
              - not_null
